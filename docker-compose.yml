services:
  signal-cli-rest-api:
    image: bbernhard/signal-cli-rest-api:latest
    environment:
      - MODE=json-rpc #supported modes: json-rpc, native, normal
      #- AUTO_RECEIVE_SCHEDULE=0 22 * * * #enable this parameter on demand 
    ports:
      - "9922:8080" #map docker port 8080 to host port 8080.
    volumes:
      - "./signal-cli-config:/home/.local/share/signal-cli"
  hypatia:
    image: hypatia:latest
    entrypoint: ["python3", "-m", "main"]
    environment:
      SIGNAL_SERVICE: "signal-cli-rest-api:8080"
      PHONE_NUMBER: "${PHONE_NUMBER}"
      PLEX_USER: "${PLEX_USER}"
      PLEX_PWD: "${PLEX_PWD}"
      OPENAI_API_KEY: "${OPENAI_API_KEY}"
      TMDB_API_KEY: "${TMDB_API_KEY}"
    volumes:
      - "${PLEX_DATA_PATH}:/app/data"
    depends_on:
      - signal-cli-rest-api